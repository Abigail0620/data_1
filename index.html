<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vialytics | Monitor de Accidentes Viales</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de Lucide Icons para iconos limpios y modernos -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Configuración de color oscura y fuente moderna */
        :root {
            --color-primary: #10b981; /* teal-500 */
            --color-dark-bg: #0f172a; /* slate-900 */
            --color-card-bg: #1e293b; /* slate-800 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-dark-bg);
        }
        /* Estilo para las tarjetas del dashboard con un toque futurista */
        .data-card {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .data-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(16, 185, 129, 0.1), 0 4px 6px -4px rgba(16, 185, 129, 0.1);
            border-color: var(--color-primary);
        }
        /* Efecto de degradado para el título */
        .gradient-text {
            background-image: linear-gradient(to right, #ffffff, var(--color-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body class="text-white min-h-screen">

    <!-- Navbar -->
    <header class="p-4 border-b border-slate-700/50 shadow-lg sticky top-0 z-10" style="background-color: rgba(15, 23, 42, 0.95);">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <!-- Logo: Simulación del mapa/pins del logo original -->
                <div class="text-xl font-bold tracking-widest gradient-text">VIALYTICS</div>
                <span class="text-xs text-gray-400 border-l border-gray-600 pl-3 hidden sm:inline">Monitor de Accidentes Viales</span>
            </div>
            <nav>
                <a href="#dashboard" class="text-sm px-3 py-1 rounded-full hover:bg-teal-700/30 transition text-teal-400">Dashboard</a>
                <a href="#acerca" class="text-sm px-3 py-1 rounded-full hover:bg-slate-700/50 transition">Acerca</a>
            </nav>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-4 md:p-8">

        <!-- Sección de Título Principal -->
        <section class="mb-8" id="dashboard">
            <h1 class="text-3xl md:text-4xl font-extrabold mb-2">Panel de Control de Seguridad Vial</h1>
            <p class="text-gray-400">Datos en tiempo real y análisis geoespacial avanzado.</p>
        </section>

        <!-- GRID DE KIPs (Key Performance Indicators) -->
        <section class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-10">
            <!-- Tarjeta 1: Accidentes Hoy -->
            <div class="data-card p-5 rounded-xl border border-slate-700 bg-slate-800/70 hover:shadow-teal-500/20">
                <div class="flex items-center justify-between mb-3">
                    <span class="text-sm font-medium text-gray-400">Accidentes Hoy</span>
                    <i data-lucide="siren" class="w-5 h-5 text-red-500"></i>
                </div>
                <div class="text-4xl font-bold text-red-400" id="stat-accidents">12</div>
                <p class="text-xs text-gray-500 mt-1">Comparado con ayer: <span class="text-red-400">-5%</span></p>
            </div>

            <!-- Tarjeta 2: Puntos de Riesgo Activos -->
            <div class="data-card p-5 rounded-xl border border-slate-700 bg-slate-800/70 hover:shadow-teal-500/20">
                <div class="flex items-center justify-between mb-3">
                    <span class="text-sm font-medium text-gray-400">Puntos de Riesgo Activos</span>
                    <i data-lucide="map-pin" class="w-5 h-5 text-yellow-500"></i>
                </div>
                <div class="text-4xl font-bold text-yellow-400" id="stat-risk">48</div>
                <p class="text-xs text-gray-500 mt-1">Nivel de alerta: <span class="text-yellow-400">Alto</span></p>
            </div>

            <!-- Tarjeta 3: Tasa de Mortalidad (Mensual) -->
            <div class="data-card p-5 rounded-xl border border-slate-700 bg-slate-800/70 hover:shadow-teal-500/20">
                <div class="flex items-center justify-between mb-3">
                    <span class="text-sm font-medium text-gray-400">Tasa de Mortalidad (7 días)</span>
                    <i data-lucide="skull" class="w-5 h-5 text-orange-500"></i>
                </div>
                <div class="text-4xl font-bold text-orange-400" id="stat-fatality">2.1%</div>
                <p class="text-xs text-gray-500 mt-1">Meta de reducción: <span class="text-green-400">0.5%</span></p>
            </div>

            <!-- Tarjeta 4: Incidentes Mitigados -->
            <div class="data-card p-5 rounded-xl border border-slate-700 bg-slate-800/70 hover:shadow-teal-500/20">
                <div class="flex items-center justify-between mb-3">
                    <span class="text-sm font-medium text-gray-400">Incidentes Mitigados</span>
                    <i data-lucide="check-circle" class="w-5 h-5 text-green-500"></i>
                </div>
                <div class="text-4xl font-bold text-green-400" id="stat-mitigated">95</div>
                <p class="text-xs text-gray-500 mt-1">Efectividad de respuesta: <span class="text-green-400">+10%</span></p>
            </div>
        </section>

        <!-- LAYOUT PRINCIPAL: Mapa y Feed de Alertas -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <!-- Columna Principal: Mapa -->
            <div class="lg:col-span-2">
                <div class="bg-slate-800/70 p-6 rounded-xl border border-slate-700 h-96">
                    <h2 class="text-xl font-semibold mb-3">Cobertura Nacional y Eventos en Vivo</h2>
                    <!-- Placeholder para el mapa dinámico -->
                    <div class="h-full bg-slate-900/50 flex items-center justify-center rounded-lg text-gray-500 text-center p-4">
                        <i data-lucide="map" class="w-8 h-8 mr-2 text-teal-500/50"></i>
                        Simulación de mapa interactivo (Geolocalización de accidentes y puntos de riesgo)
                    </div>
                </div>
            </div>

            <!-- Columna Secundaria: Alertas Recientes -->
            <div class="lg:col-span-1">
                <div class="bg-slate-800/70 p-6 rounded-xl border border-slate-700 h-96 overflow-y-auto">
                    <h2 class="text-xl font-semibold mb-3">Alertas Recientes</h2>
                    <ul id="alert-feed" class="space-y-3">
                        <!-- Las alertas se cargarán aquí por JavaScript -->
                    </ul>
                </div>
            </div>
        </section>

        <!-- Separador / Sección "Acerca de" -->
        <div class="my-12 border-t border-slate-700/50"></div>

        <section id="acerca" class="max-w-4xl mx-auto text-center">
            <h2 class="text-3xl font-bold mb-4 gradient-text">¿Qué es Vialytics?</h2>
            <p class="text-lg text-gray-300 mb-6">
                Vialytics es una plataforma de **inteligencia vial** diseñada para prevenir y mitigar accidentes.
                Utilizamos **datos en tiempo real** y análisis geoespacial avanzado para identificar patrones de riesgo,
                predecir incidentes y optimizar la respuesta de emergencia en carreteras y ciudades de todo el país.
            </p>
            <div class="flex justify-center space-x-4">
                <button class="flex items-center px-6 py-2 bg-teal-600 hover:bg-teal-700 rounded-full font-medium transition shadow-lg shadow-teal-500/30">
                    <i data-lucide="layers" class="w-4 h-4 mr-2"></i>
                    Ver Metodología
                </button>
                <button class="flex items-center px-6 py-2 bg-transparent border border-gray-600 hover:border-teal-500 hover:text-teal-400 rounded-full font-medium transition">
                    <i data-lucide="mail" class="w-4 h-4 mr-2"></i>
                    Contacto
                </button>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="p-6 mt-12 border-t border-slate-700/50 text-center text-gray-500">
        <p class="text-sm">Vialytics © 2024 | Monitoreando el camino hacia un futuro más seguro.</p>
    </footer>

    <!-- JavaScript para interactividad (Contadores y Feed de Alertas) -->
    <script>
        // Inicializa los iconos de Lucide
        lucide.createIcons();

        // 1. Contador Dinámico para las métricas
        function animateValue(objId, start, end, duration) {
            let startTimestamp = null;
            const obj = document.getElementById(objId);
            if (!obj) return; // Salir si el elemento no existe
            
            // Función de paso para la animación
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                
                // Determina si es porcentaje o número entero
                let currentValue;
                if (objId === 'stat-fatality') {
                    currentValue = (start + progress * (end - start)).toFixed(1) + '%';
                } else {
                    currentValue = Math.floor(start + progress * (end - start));
                }
                
                obj.innerHTML = currentValue;
                
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        // Llamar a los contadores al cargar
        window.onload = () => {
            animateValue("stat-accidents", 0, 12, 1500);
            animateValue("stat-risk", 0, 48, 1800);
            animateValue("stat-fatality", 0, 2.1, 2000);
            animateValue("stat-mitigated", 0, 95, 1600);
            
            // Iniciar la simulación del feed
            simulateAlertFeed();
        };

        // 2. Simulación de Feed de Alertas en Tiempo Real
        const alertFeed = document.getElementById('alert-feed');
        const alerts = [
            { type: 'Accidente', location: 'Autopista MEX-57, km 150', time: 'hace 5 min', color: 'text-red-400', icon: 'siren' },
            { type: 'Riesgo Alto', location: 'Circuito Interior, Zona A', time: 'hace 12 min', color: 'text-yellow-400', icon: 'alert-triangle' },
            { type: 'Resolución', location: 'Eje 5 Sur, Incidente 812', time: 'hace 20 min', color: 'text-green-400', icon: 'check' },
            { type: 'Accidente Menor', location: 'Av. Insurgentes, Cruce X', time: 'hace 35 min', color: 'text-orange-400', icon: 'car' },
            { type: 'Riesgo Moderado', location: 'Periférico, Salida 4', time: 'hace 45 min', color: 'text-yellow-500', icon: 'map-pin' },
        ];

        function simulateAlertFeed() {
            alerts.forEach(alert => {
                const li = document.createElement('li');
                li.className = 'flex items-start p-3 bg-slate-900/50 rounded-lg transition hover:bg-slate-700/50';
                li.innerHTML = `
                    <i data-lucide="${alert.icon}" class="w-5 h-5 ${alert.color} flex-shrink-0 mt-1 mr-3"></i>
                    <div>
                        <p class="font-medium text-white">${alert.type}: <span class="text-gray-300 font-normal">${alert.location}</span></p>
                        <p class="text-xs text-gray-500">${alert.time}</p>
                    </div>
                `;
                alertFeed.appendChild(li);
                // Re-crear iconos dentro del nuevo elemento
                lucide.createIcons();
            });
        }
    </script>
</body>
</html>
